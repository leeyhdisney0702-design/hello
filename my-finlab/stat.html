<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>統計學實驗室 - 常態分佈視覺化</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f0f2f5; padding: 40px; display: flex; justify-content: center; }
        .container { background: white; padding: 30px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); width: 100%; max-width: 800px; }
        h1 { color: #333; text-align: center; }
        .control-panel { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px; background: #fafafa; padding: 20px; border-radius: 10px; }
        label { font-weight: bold; color: #555; display: block; margin-bottom: 10px; }
        input[type="range"] { width: 100%; cursor: pointer; }
        .value-display { color: #007bff; font-weight: bold; }
        .formula { text-align: center; font-style: italic; color: #666; margin-bottom: 10px; }
    </style>
</head>
<body>

<div class="container">
    <h1>常態分佈互動實驗室</h1>
    <p class="formula">Normal Distribution: $N(\mu, \sigma^2)$</p>
    
    <div class="control-panel">
        <div>
            <label>平均值 (μ): <span id="muVal" class="value-display">0</span></label>
            <input type="range" id="mu" min="-10" max="10" step="0.5" value="0">
        </div>
        <div>
            <label>標準差 (σ): <span id="sigmaVal" class="value-display">1</span></label>
            <input type="range" id="sigma" min="0.5" max="5" step="0.1" value="1">
        </div>
    </div>

    <canvas id="statChart"></canvas>
</div>

<script>
    let statChart = null;

    // 常態分佈機率密度函數 (PDF) 公式
    function normalPDF(x, mu, sigma) {
        return (1 / (sigma * Math.sqrt(2 * Math.PI))) * Math.exp(-0.5 * Math.pow((x - mu) / sigma, 2));
    }

    function updateChart() {
        const mu = parseFloat(document.getElementById('mu').value);
        const sigma = parseFloat(document.getElementById('sigma').value);
        
        document.getElementById('muVal').innerText = mu;
        document.getElementById('sigmaVal').innerText = sigma;

        const labels = [];
        const data = [];
        
        // 設定 X 軸範圍從 -15 到 15
        for (let x = -15; x <= 15; x += 0.2) {
            labels.push(x.toFixed(1));
            data.push(normalPDF(x, mu, sigma));
        }

        const ctx = document.getElementById('statChart').getContext('2d');
        
        if (statChart) statChart.destroy();

        statChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: labels,
                datasets: [{
                    label: '機率密度 (PDF)',
                    data: data,
                    borderColor: '#007bff',
                    backgroundColor: 'rgba(0, 123, 255, 0.2)',
                    fill: true,
                    pointRadius: 0,
                    borderWidth: 3,
                    tension: 0.4
                }]
            },
            options: {
                responsive: true,
                scales: {
                    y: { beginAtZero: true, max: 0.8 },
                    x: { ticks: { maxTicksLimit: 10 } }
                },
                animation: { duration: 300 }
            }
        });
    }

    // 監聽拉桿變動
    document.getElementById('mu').addEventListener('input', updateChart);
    document.getElementById('sigma').addEventListener('input', updateChart);

    // 初始繪圖
    updateChart();
</script>

</body>
</html>